<html>

<style type="text/css" media="screen">

    h1.center {
        text-align: center;
    }

    h2.center {
        text-align: center;
    }

    p.center {
        text-align: center;
    }

    div.center {
        margin: auto;
        width: 50%;
        padding: 40px;
    }

</style>

<div class="center">
    <h1 class="center">Я работаю уже</h1>
    <!--<p th:text="${date}"></p>-->

    <h2 class="center" id="alive"></h2>
    <h2 class="center" id="disturb"></h2>
    <p class="center">
        Не отнимайте впустую время у своих коллег, будьте вежливы и не </br>
        тревожьте без надобности тех, кто сейчас занят. Как только появиться </br>
        свободное время мы будем готовы обсудить ваш вопрос, но до тех пор </br>
        нам надо выполнить то, что на данный момент важно для нас.</br>
    </p>
    <p class="center">
        Если вы считаете что вас отвлекают отправляйте ссылку на этот <a href="http://3.208.243.203">сайт</a></br>
        как напоминание о том, сколько времени можно отнять впустую.
    </p>
</div>
<script>
    //var date = "[[${date}]]";
    setInterval(function () {
        var response = httpGet("172.31.36.249:8080/time");
        document.getElementById("alive").innerHTML = msToTime(new Date().getTime() - response.start);
        document.getElementById("disturb").innerHTML = " За это время " + response.count + " человек(а) уже потратили здесь </br>" + msToTime(response.sec * 1000);
    }, 1000);

    function httpGet(url) {
        var xmlHttp = new XMLHttpRequest();

        xmlHttp.open("GET", url, false); // false for synchronous request
        xmlHttp.send(null);

        return JSON.parse(xmlHttp.responseText);
    }

    function msToTime(duration) {
        var milliseconds = parseInt((duration % 1000) / 100),
            seconds = Math.floor((duration / 1000) % 60),
            minutes = Math.floor((duration / (1000 * 60)) % 60),
            hours = Math.floor((duration / (1000 * 60 * 60)) % 24);

        hours = (hours < 10) ? "0" + hours : hours;
        minutes = (minutes < 10) ? "0" + minutes : minutes;
        seconds = (seconds < 10) ? "0" + seconds : seconds;

        return hours + " h " + minutes + " m " + seconds + " s ";
    }
</script>

</html>